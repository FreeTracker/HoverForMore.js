// http://lukifer.github.com/HoverForMore.js 1.2
// opensource.org/licenses/mit-license.php
;(function(a,b){var c=!!a.fn.jquery;var d=/Firefox/.test(navigator.userAgent);var e=/Mobile/.test(navigator.userAgent);var f={speed:60,gap:20,loop:true,removeTitle:true,snapback:true,alwaysOn:false,addStyles:true,target:false,startEvent:e?"touchstart":c?"mouseenter":"mouseover",stopEvent:e?"touchend":c?"mouseleave":"mouseout"};a.fn["hoverForMore"]=function(b){var c=this;var g=document.getElementsByTagName("head")[0];var h,i,j;b=a.extend({},f,b);var k=b.target||c.selector;if(b.alwaysOn){b.loop=true;b.startEvent="startLooping"}var l=document.body.style.animationName?true:false,m="animation",n="transition",o="transform",p="",q="Webkit Moz O ms Khtml".split(" "),r="";if(l===false)for(var s=0;s<q.length;s++){if(document.body.style[q[s]+"AnimationName"]===undefined)continue;r=q[s];m=r+"Animation";n=r+"Transition";o=r+"Transform";cssPrefix="-"+r.toLowerCase()+"-";l=true;break}if(b.addStyles){g.appendChild(a('<style type="text/css">'+c.selector+"{"+"cursor:default;"+"text-align:left;"+"display:block;"+"overflow:hidden;"+"white-space:nowrap;"+"text-overflow:ellipsis;"+cssPrefix+"user-select: none;"+"}</style>")[0])}if(!l){a(c.selector).each(function(b,c){var d=a(c);d.attr("title",d.text())});return c}if(b.loop){var t=a('<style type="text/css"></style>');var u=a('<style type="text/css"></style>');g.appendChild(t[0]);g.appendChild(u[0])}else{a(c.selector).each(function(a,b){b.style[o]="translateX(0px)"})}a(k).live(b.startEvent,function(f){j=(new Date).getTime();var g=a(b.target?c.selector:this).filter(":first");if(!g.length)return true;var k=g.parent();var l=g[0].scrollWidth-g.width();if(l<=0)return true;if(b.removeTitle)g.removeAttr("title");i=i||k.css("overflow");h=h||g.css("overflow");k.css("overflow","hidden");if(e&&b.addStyles)a("body").css(cssPrefix+"user-select","none");g.css("overflow","visible").addClass("scrolling");if(b.loop){g.children(".hoverForMoreContent").remove();var p=a('<span class="hoverForMoreContent" />').css({paddingLeft:parseInt(b.gap)+"px"}).text(g.text());g.append(p);var q=p.width()+parseInt(b.gap);var r="@"+cssPrefix+"keyframes hoverForMoreSlide { "+"from {"+cssPrefix+"transform:translateX( 0 ) }"+"to {"+cssPrefix+"transform:translateX( -"+q+"px ) }"+"}";t[0].innerHTML=r;var s=q/parseFloat(b.speed);g[0].style[m]="hoverForMoreSlide "+s+"s linear infinite"}else{var s=l/parseFloat(b.speed);g[0].style[n]=cssPrefix+"transform "+s+"s linear";if(!d)g[0].style[o]="translateX(-"+l+"px)";else setTimeout(function(){g[0].style[o]="translateX(-"+l+"px)"},0)}});if(!b.alwaysOn)a(k).live(b.stopEvent,function(f){var g=a(b.target?c.selector:this).filter(":first");if(!g.length)return true;if(b.loop){if(b.snapback){var k=g.children(".hoverForMoreContent").width()+parseInt(b.gap);var l=((new Date).getTime()-j)*.001;var p=l*b.speed%k;var q=p>k/2;var r="@"+cssPrefix+"keyframes hoverForMoreSlideReverse { "+"from {"+cssPrefix+"transform:translateX( "+(0-p)+"px ) }"+"to {"+cssPrefix+"transform:translateX( "+(q?0-k:0)+"px ) }"+"}";u[0].innerHTML=r;var s=(q?k-p:p)*.2/parseFloat(b.speed);g[0].style[m]="hoverForMoreSlideReverse "+(s>1?1:s)+"s linear";g.removeClass("scrolling");setTimeout(function(){if(g.is(".scrolling"))return;g.children(".hoverForMoreContent").remove();g.css("overflow",h);g.parent().css("overflow",i);if(e&&b.addStyles)a("body").css(cssPrefix+"user-select","text")},s*1e3- -50)}else{g[0].style[m]="";g.css("overflow",h).find(".hoverForMoreContent").remove();g.parent().css("overflow",i);if(e&&b.addStyles)a("body").css(cssPrefix+"user-select","text")}}else{var l=((new Date).getTime()-j)/1e3;var t=g[0].style[n].match(/transform (.*)s/);var s=t&&t[1]&&parseFloat(t[1])<l?parseFloat(t[1]):l;s*=.5;if(!b.snapback)g[0].style[n]="";else g[0].style[n]=cssPrefix+"transform "+s+"s linear";g.removeClass("scrolling");if(!d)g[0].style[o]="translateX(0px)";else setTimeout(function(){g[0].style[o]="translateX(0px)"},0);if(!b.snapback){g.css("overflow",h);if(e&&b.addStyles)a("body").css(cssPrefix+"user-select","text")}else{setTimeout(function(){if(g.is(".scrolling"))return;g.css("overflow",h);if(e&&b.addStyles)a("body").css(cssPrefix+"user-select","text")},s*1e3)}}});c.refresh=function(){a(c.selector).each(function(c,d){a(d).not(".scrolling").trigger(b.startEvent)})};if(b.alwaysOn)c.refresh();return c}})(window.jQuery||$);