// lukifer.net/hover-for-more
// opensource.org/licenses/mit-license.php
(function(a,b,c){var d=!!a.fn.jquery;var e={speed:60,gap:15,loop:true,removeTitle:true,snapback:true,alwaysOn:false,addStyles:true,startEvent:d?"mouseenter":"mouseover",stopEvent:d?"mouseleave":"mouseout"};a.fn["hoverForMore"]=function(b){var d=this;var f=document.getElementsByTagName("head")[0];var g,h,i;b=a.extend({},e,b);if(b.alwaysOn){b.loop=true;b.startEvent="startLooping"}if(b.addStyles){f.appendChild(a('<style type="text/css">'+d.selector+"{"+"cursor:default;"+"text-align:left;"+"display:block;"+"overflow:hidden;"+"white-space:nowrap;"+"text-overflow:ellipsis;"+"}</style>")[0])}var j=document.body.style.animationName?true:false,k="animation",l="transition",m="transform",n="",o="Webkit Moz O ms Khtml".split(" "),p="";if(j===false)for(var q=0;q<o.length;q++){if(document.body.style[o[q]+"AnimationName"]===c)continue;p=o[q];k=p+"Animation";l=p+"Transition";m=p+"Transform";cssPrefix="-"+p.toLowerCase()+"-";j=true;break}if(!j){$item.attr("title",$item.text());return d}if(b.loop){var r=a('<style type="text/css"></style>');var s=a('<style type="text/css"></style>');f.appendChild(r[0]);f.appendChild(s[0])}a(d.selector).live(b.startEvent,function(c){i=(new Date).getTime();var d=a(this);var e=d.parent();var f=this.scrollWidth-d.width();if(f<=0)return true;if(b.removeTitle)d.removeAttr("title");h=h||e.css("overflow");g=g||d.css("overflow");e.css("overflow","hidden");d.css("overflow","visible").addClass("scrolling");if(b.loop){d.children(".hoverForMoreContent").remove();var j=a('<span class="hoverForMoreContent" />').css({paddingLeft:parseInt(b.gap)+"px"}).text(d.text());d.append(j);var n=j.width()+parseInt(b.gap);var o="@"+cssPrefix+"keyframes hoverForMoreSlide { "+"from {"+cssPrefix+"transform:translateX( 0 ) }"+"to {"+cssPrefix+"transform:translateX( -"+n+"px ) }"+"}";r[0].innerHTML=o;var p=n/parseFloat(b.speed);this.style[k]="hoverForMoreSlide "+p+"s linear infinite"}else{var p=f/parseFloat(b.speed);this.style[l]=cssPrefix+"transform "+p+"s linear";this.style[m]="translateX(-"+f+"px)"}});if(!b.alwaysOn)a(d.selector).live(b.stopEvent,function(c){var d=a(this);if(b.loop){if(b.snapback){var e=d.children(".hoverForMoreContent").width()+parseInt(b.gap);var f=((new Date).getTime()-i)*.001;var j=f*b.speed%e;var n=j>e/2;var o="@"+cssPrefix+"keyframes hoverForMoreSlideReverse { "+"from {"+cssPrefix+"transform:translateX( "+(0-j)+"px ) }"+"to {"+cssPrefix+"transform:translateX( "+(n?0-e:0)+"px ) }"+"}";s[0].innerHTML=o;var p=(n?e-j:j)*.2/parseFloat(b.speed);this.style[k]="hoverForMoreSlideReverse "+(p>1?1:p)+"s linear";d.removeClass("scrolling");setTimeout(function(){if(d.is(".scrolling"))return;d.children(".hoverForMoreContent").remove();d.css("overflow",g);d.parent().css("overflow",h)},p*1e3- -50)}else{this.style[k]="";d.css("overflow",g).find(".hoverForMoreContent").remove();d.parent().css("overflow",h)}}else{if(!b.snapback)this.style[l]="";d.removeClass("scrolling");this.style[m]="translateX(0px)";if(!b.snapback)d.css("overflow",g);else{var p=(this.scrollWidth-d.width())/parseFloat(b.speed);setTimeout(function(){if(d.is(".scrolling"))return;d.css("overflow",g)},p*1e3- -50)}}});d.refresh=function(){a(d.selector).each(function(c,d){a(d).not(".scrolling").trigger(b.startEvent)})};if(b.alwaysOn)d.refresh();return d}})(window.jQuery||$)