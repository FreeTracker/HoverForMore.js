// http://lukifer.github.com/HoverForMore.js
// opensource.org/licenses/mit-license.php
;(function(a,b,c){var d=!!a.fn.jquery;var e=!!navigator.userAgent.match(/Firefox/);var f={speed:60,gap:15,loop:true,removeTitle:true,snapback:true,alwaysOn:false,addStyles:true,target:false,startEvent:d?"mouseenter":"mouseover",stopEvent:d?"mouseleave":"mouseout"};a.fn["hoverForMore"]=function(b){var d=this;var g=document.getElementsByTagName("head")[0];var h,i,j;b=a.extend({},f,b);var k=b.target||d.selector;if(b.alwaysOn){b.loop=true;b.startEvent="startLooping"}if(b.addStyles){g.appendChild(a('<style type="text/css">'+d.selector+"{"+"cursor:default;"+"text-align:left;"+"display:block;"+"overflow:hidden;"+"white-space:nowrap;"+"text-overflow:ellipsis;"+"}</style>")[0])}var l=document.body.style.animationName?true:false,m="animation",n="transition",o="transform",p="",q="Webkit Moz O ms Khtml".split(" "),r="";if(l===false)for(var s=0;s<q.length;s++){if(document.body.style[q[s]+"AnimationName"]===c)continue;r=q[s];m=r+"Animation";n=r+"Transition";o=r+"Transform";cssPrefix="-"+r.toLowerCase()+"-";l=true;break}if(!l){a(d.selector).each(function(b,c){var d=a(c);d.attr("title",d.text())});return d}if(b.loop){var t=a('<style type="text/css"></style>');var u=a('<style type="text/css"></style>');g.appendChild(t[0]);g.appendChild(u[0])}else{a(d.selector).each(function(a,b){b.style[o]="translateX(0px)"})}a(k).live(b.startEvent,function(c){j=(new Date).getTime();var f=a(b.target?d.selector:this).filter(":first");if(!f.length)return true;var g=f.parent();var k=f[0].scrollWidth-f.width();if(k<=0)return true;if(b.removeTitle)f.removeAttr("title");i=i||g.css("overflow");h=h||f.css("overflow");g.css("overflow","hidden");f.css("overflow","visible").addClass("scrolling");if(b.loop){f.children(".hoverForMoreContent").remove();var l=a('<span class="hoverForMoreContent" />').css({paddingLeft:parseInt(b.gap)+"px"}).text(f.text());f.append(l);var p=l.width()+parseInt(b.gap);var q="@"+cssPrefix+"keyframes hoverForMoreSlide { "+"from {"+cssPrefix+"transform:translateX( 0 ) }"+"to {"+cssPrefix+"transform:translateX( -"+p+"px ) }"+"}";t[0].innerHTML=q;var r=p/parseFloat(b.speed);f[0].style[m]="hoverForMoreSlide "+r+"s linear infinite"}else{var r=k/parseFloat(b.speed);f[0].style[n]=cssPrefix+"transform "+r+"s linear";if(!e)f[0].style[o]="translateX(-"+k+"px)";else setTimeout(function(){f[0].style[o]="translateX(-"+k+"px)"},0)}});if(!b.alwaysOn)a(k).live(b.stopEvent,function(c){var f=a(b.target?d.selector:this).filter(":first");if(!f.length)return true;if(b.loop){if(b.snapback){var g=f.children(".hoverForMoreContent").width()+parseInt(b.gap);var k=((new Date).getTime()-j)*.001;var l=k*b.speed%g;var p=l>g/2;var q="@"+cssPrefix+"keyframes hoverForMoreSlideReverse { "+"from {"+cssPrefix+"transform:translateX( "+(0-l)+"px ) }"+"to {"+cssPrefix+"transform:translateX( "+(p?0-g:0)+"px ) }"+"}";u[0].innerHTML=q;var r=(p?g-l:l)*.2/parseFloat(b.speed);f[0].style[m]="hoverForMoreSlideReverse "+(r>1?1:r)+"s linear";f.removeClass("scrolling");setTimeout(function(){if(f.is(".scrolling"))return;f.children(".hoverForMoreContent").remove();f.css("overflow",h);f.parent().css("overflow",i)},r*1e3)}else{f[0].style[m]="";f.css("overflow",h).find(".hoverForMoreContent").remove();f.parent().css("overflow",i)}}else{var k=((new Date).getTime()-j)/1e3;var s=f[0].style[n].match(/transform (.*)s/);var r=s&&s[1]&&parseFloat(s[1])<k?parseFloat(s[1]):k;r*=.5;if(!b.snapback)f[0].style[n]="";else f[0].style[n]=cssPrefix+"transform "+r+"s linear";f.removeClass("scrolling");if(!e)f[0].style[o]="translateX(0px)";else setTimeout(function(){f[0].style[o]="translateX(0px)"},0);if(!b.snapback)f.css("overflow",h);else{setTimeout(function(){if(f.is(".scrolling"))return;f.css("overflow",h)},r*1e3)}}});d.refresh=function(){a(d.selector).each(function(c,d){a(d).not(".scrolling").trigger(b.startEvent)})};if(b.alwaysOn)d.refresh();return d}})(window.jQuery||$);